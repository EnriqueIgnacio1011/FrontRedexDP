{"remainingRequest":"C:\\Users\\PC\\Downloads\\Versiones\\dp1_front-master\\vue-black-dashboard-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\PC\\Downloads\\Versiones\\dp1_front-master\\vue-black-dashboard-master\\src\\pages\\Administrador\\AdminForm.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\PC\\Downloads\\Versiones\\dp1_front-master\\vue-black-dashboard-master\\src\\pages\\Administrador\\AdminForm.vue","mtime":1596683947000},{"path":"C:\\Users\\PC\\Downloads\\Versiones\\dp1_front-master\\vue-black-dashboard-master\\node_modules\\css-loader\\index.js","mtime":1713478864379},{"path":"C:\\Users\\PC\\Downloads\\Versiones\\dp1_front-master\\vue-black-dashboard-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1713478870732},{"path":"C:\\Users\\PC\\Downloads\\Versiones\\dp1_front-master\\vue-black-dashboard-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713478866974},{"path":"C:\\Users\\PC\\Downloads\\Versiones\\dp1_front-master\\vue-black-dashboard-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1713478868660}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.drop-active {\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  position: fixed;\n  z-index: 9999;\n  opacity: .6;\n  text-align: center;\n  background: #000;\n}\n",{"version":3,"sources":["AdminForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AdminForm.vue","sourceRoot":"src/pages/Administrador","sourcesContent":["<template>\n  <card>   \n    <h5 slot=\"header\" class=\"title\">{{title}}</h5>\n    <div class=\"row\">\n        <div class=\"col-md-10 m-l-10 p-t-5\">\n            <base-input placeholder=\"Buscar\" v-model=\"searchWord\">\n            </base-input>\n        </div>\n        <div class=\"col-md-2\">    \n            <base-button v-b-modal.modal-upload :icon=\"true\" type=\"primary\" fill><i class=\"tim-icons icon-upload\"></i></base-button>\n            <b-modal id=\"modal-upload\" :title=\"titleAgregar\" :hide-footer=\"true\">\n              <modal-upload-file :path=\"uploadPath\"></modal-upload-file>\n            </b-modal>\n            <base-button :icon=\"true\" fill @click=\"removeBatch()\"  v-if=\"id == 'sedes'\"><i class=\"tim-icons icon-trash-simple\"></i></base-button>\n        </div>\n    </div>\n    <div class=\"col-md-12 text-right mb-3\" v-if=\"id == 'usuarios' || id == 'usuarios-gerente'\">\n        <base-button type=\"primary\" fill @click=\"anadirUsuario()\">Añadir Nuevo Usuario</base-button>\n    </div>\n\n    <div v-if=\"isLoading\"><loader-spinner></loader-spinner></div>\n    <div class=\"row\" v-else>        \n        <div class=\"col-md-12\" v-if=\"!showMessage\">\n            <base-table :data=\"adminTable.data\"\n                :columns=\"adminTable.columns\"\n                thead-classes=\"text-primary\"\n                :searchWord=\"searchWord\"\n                :setAcciones=\"listaBoolean\"\n                :actions=\"true\"\n                :select=\"true\"\n                :combo=\"false\"\n                @signalRemove=\"remove\"\n                @signalModify=\"modify\">\n            </base-table>\n        </div>\n        <div v-else class=\"col-md-12\"><no-data-found></no-data-found></div>\n    </div>\n  </card>\n</template>\n\n\n<script>\n  import {BaseTable, LoaderSpinner, NoDataFound, ModalUploadFile} from \"@/components\";\n  import axios from 'axios';\n  import ModificarSede from '../Administrador/ModificarSede'\n  import Authentication from '@/store/authentication.js';\n  import NotificationTemplateEliminateSedeSuccess from '../Notifications/NotificationTemplateEliminateSedeSuccess';\n  import NotificationTemplateEliminateSedeError from '../Notifications/NotificationTemplateEliminateSedeError';\n  import NotificationTemplateEliminateRutaSuccess from '../Notifications/NotificationTemplateEliminateRutaSuccess';\n  import NotificationTemplateEliminateRutaError from '../Notifications/NotificationTemplateEliminateRutaError';\n  \n\n  export default {\n    components: {\n      BaseTable,\n      ModificarSede,\n      LoaderSpinner,\n      NoDataFound,\n      ModalUploadFile\n    },\n    data() {\n      return {\n        adminTable: {\n          title: \"Admin Table\",\n          columns: [],\n          data: [],\n        },        \n        idsede:'',\n        title: \"\",\n        searchWord: \"\",\n        isLoading: true,\n        showMessage: true,\n        listaBoolean: {detalle:false,eliminar:false,modificar:true},\n        type: [\"\", \"info\", \"success\", \"warning\", \"danger\"],\n        notifications: {\n          topCenter: false\n        },\n        sedes: [],\n        titleAgregar: \"\",\n        files:[],\n        uploadPath: \"\",\n      };\n    },\n    mounted(){\n      let vue = this;\n      vue.tableData = vue.adminTable.data;\n      switch(vue.id){\n        case \"rutas\":\n          vue.title = \"Gestión de Rutas\";\n          vue.titleAgregar = \"Agregar archivo de rutas\";\n          vue.adminTable.columns = ['Codigo', 'Origen', 'Destino', 'Capacidad','Estado'];\n          vue.uploadPath = vue.$store.state.appUri + \"\";\n          axios.get(vue.$store.state.appUri + '/rutas/listarRutasNuevo')\n          .then(function(response){\n            console.log(response.data);\n            if(response.data.length != 0){\n              vue.showMessage = false;\n              response.data.forEach(element => {\n                vue.adminTable.data.push({\n                  \"select\": false,\n                  \"codigo\": element.id, \n                  \"origen\": element.nombreSedeOrigen.replace(\"sede_\", \"\"), \n                  \"destino\": element.nombreSedeDestino.replace(\"sede_\", \"\"),\n                  \"capacidad\": element.capacidad_contratada,\n                  \"estado\": element.activo ? \"Activo\" : \"Inactivo\"\n                })\n              });\n            }\n            vue.isLoading = false;\n          });\n          break;\n        case \"usuarios\":\n          vue.title = \"Gestión de Usuarios\";\n          vue.titleAgregar = \"Agregar archivo de usuarios\";\n          vue.adminTable.columns = ['Tipo Documento', 'Documento', 'Nombre/Razon Social', 'Rol'];\n          vue.uploadPath = vue.$store.state.appUri + \"\";\n          axios.get(this.$store.state.appUri+'/usuarios/listar')\n          .then(function(response){\n            if(response.data.length != 0){\n              vue.showMessage = false;\n              response.data.forEach(element => {\n                  vue.adminTable.data.push({\n                    \"select\": false,\n                    \"id\": element.id,\n                    \"tipo documento\": element.tipoDocumento, \n                    \"documento\": element.numeroDocumento, \n                    \"nombre/razon social\": element.nombreRazonSocial,\n                    \"rol\": element.tipoUsuario.replace(\"_\", \" \").toLowerCase(),\n                    \"estado\": element.activo ? \"Activo\" : \"Inactivo\"\n                  });\n                });\n            }\n            vue.isLoading = false;\n          });\n          break;\n        case \"usuarios-gerente\":\n          vue.title = \"Gestión de Usuarios\";\n          vue.titleAgregar = \"Agregar archivo de usuarios\";\n          vue.adminTable.columns = ['Tipo Documento', 'Documento', 'Nombre/Razon Social'];\n          vue.uploadPath = vue.$store.state.appUri + \"\";\n          var idUsuario = Authentication.getProfile().id;\n          axios.get(vue.$store.state.appUri+'/usuarios/obtenerDatosSede/'+ idUsuario)\n          .then(function(response){\n            var idSede = response.data.sede.id;\n            axios.get(vue.$store.state.appUri+'/usuarios/listarOperariosDeSede/' + idSede)\n            .then(function(response){\n              if(response.data.length != 0){\n                vue.showMessage = false;\n                response.data.forEach(element => {\n                    vue.adminTable.data.push({\n                      \"select\": false,\n                      \"id\": element.id,\n                      \"tipo documento\": element.tipoDocumento, \n                      \"documento\": element.numeroDocumento, \n                      \"nombre/razon social\": element.nombreRazonSocial,\n                      \"rol\": element.tipoUsuario.replace(\"_\", \" \").toLowerCase(),\n                      \"estado\": element.activo ? \"Activo\" : \"Inactivo\"\n                    });\n                  });\n              }\n              vue.isLoading = false;\n            });\n          });\n          \n          break;\n        case \"sedes\":\n          vue.title = \"Gestión de Sedes\";\n          vue.titleAgregar = \"Agregar archivo de sedes\";\n          vue.adminTable.columns = ['Codigo', 'Nombre', 'OACI', 'Locacion', 'Estado'];\n          vue.uploadPath = vue.$store.state.appUri + \"\";\n          axios.get(vue.$store.state.appUri + '/sedes/listarSedes')\n          .then(function(response){\n            if(response.data.length != 0){\n              vue.showMessage = false;\n              response.data.forEach(element => {\n                vue.adminTable.data.push({\n                  \"select\": false,\n                  \"codigo\": element.id, \n                  \"nombre\": element.nombre.replace(\"sede_\", \"Sede de \"),\n                  \"oaci\": element.codigoOaci, \n                  \"prefijoCiudad\": element.prefijoCiudad,\n                  \"capacidad\": element.numero_paquetes,\n                  \"capacidad_max\": element.capacidad_max,\n                  \"locacion\": element.pais.nombre + \" - \" + element.pais.ciudad,\n                  \"estado\": element.activo ? \"Activo\": \"Inactivo\"\n                })\n              });\n            }\n            vue.isLoading = false;\n          });\n          break;\n      }\n    },\n    methods:{\n      notifyVue(verticalAlign, horizontalAlign,color,componente) {\n        this.$notify({\n          component: componente,\n          icon: \"tim-icons icon-bell-55\",\n          horizontalAlign: horizontalAlign,\n          verticalAlign: verticalAlign,\n          type: this.type[color],\n          timeout: 0\n        });\n      },\n      anadirUsuario: function(){\n        this.$router.push('/admin/crearUsuario');\n      },\n      remove: function(item){\n        let vue = this;        \n        switch(vue.id){\n          case \"rutas\":            \n            axios.post(this.$store.state.appUri + '/rutas/darDeBaja/' + item.codigo).then(function(confirm){\n              vue.notifyVue('top', 'center',2, NotificationTemplateEliminateRutaSuccess);\n              vue.$forceUpdate();\n            })\n            .catch(function(error){\n              vue.notifyVue('top', 'center',4, NotificationTemplateEliminateRutaError);\n              console.log(error);\n            });\n            break;\n          case \"sedes\":\n            axios.post(this.$store.state.appUri + '/sedes/darDeBaja/' + item.codigo).then(function(confirm){\n              vue.notifyVue('top', 'center',2, NotificationTemplateEliminateSedeSuccess);\n              vue.$forceUpdate();\n            })\n            .catch(function(error){\n              vue.notifyVue('top', 'center',4, NotificationTemplateEliminateSedeError);\n              console.log(error);\n            });\n            break;\n          case \"usuarios\":\n            break;\n        } \n      },\n      removeBatch: function(){\n        let vue = this;\n        switch(vue.id){\n          case \"rutas\":\n            break;\n          case \"sedes\":\n            var codigos = {ids: []};\n            vue.adminTable.data.forEach(function(item){\n              if(item.select) return codigos.ids.push(item.codigo);\n            });\n            vue.$bvModal.msgBoxConfirm('Por favor, confirme para continuar.',{\n              title: 'Eliminar',\n              size: 'sm',\n              okTitle: 'Sí',\n              cancelTitle: 'No',\n              hideHeaderClose: false,\n              centered: false\n            }).then(confirm => {\n              if(confirm){\n                axios.post(this.$store.state.appUri + '/sedes/darDeBajaMasivo', codigos).then(function(confirm){                  \n                  vue.notifyVue('top', 'center',2, NotificationTemplateEliminateSedeSuccess);\n                  vue.$forceUpdate();\n                });\n              }\n            })\n            .catch(function (error) {\n              vue.notifyVue('top', 'center',4, NotificationTemplateEliminateSedeError);\n              console.log(error);\n            });\n            \n            break;\n          case \"usuarios\":\n            break;\n        } \n      },\n      modify: function(item){\n        let vue = this;\n        switch(vue.id){\n          case \"rutas\":\n            var idRuta = item.codigo;\n            vue.$router.push({name: \"Modificar ruta\", params: {idRuta: item.codigo}});\n            break;\n          case \"sedes\":\n            console.log('Antes');\n            console.log(item);\n            var idSede = item.codigo;\n            vue.$router.push({name: \"Modificar sede\", params: {idSede: item.codigo}});\n            console.log('Despues');\n            break;\n          case \"usuarios\":\n            vue.$router.push('/admin/modificarUsuario/' + item.id); \n        \n            break;\n          case \"usuarios-gerente\":\n            vue.$router.push({name: \"Modificación de usuarios\", params: {idUsuario: item.id}});\n            break;\n        }\n      }\n    },\n    props: {\n      id: {\n        type: String,\n        default: () => {\n          return \"\";\n        }\n      }\n    }\n  }\n</script>\n<style>\n.drop-active {\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  position: fixed;\n  z-index: 9999;\n  opacity: .6;\n  text-align: center;\n  background: #000;\n}\n</style>\n"]}]}