{"remainingRequest":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\src\\pages\\Profile\\CreateProfile.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\src\\pages\\Profile\\CreateProfile.vue","mtime":1596683947000},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713478866974},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\babel-loader\\lib\\index.js","mtime":1713478866263},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713478866974},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\vue-loader\\lib\\index.js","mtime":1713478868660}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from 'axios';\nimport Authentication from '@/store/authentication.js';\n\nimport NotificationTemplateRegisterUserSuccess from '../Notifications/NotificationTemplateRegisterUserSuccess'; \nimport NotificationTemplateModifiyUserSuccess from '../Notifications/NotificationTemplateModifiyUserSuccess';\nimport NotificationTemplateRegisterUserError from '../Notifications/NotificationTemplateRegisterUserError';\n\nconst TIPO_OPERARIO = 'OPERARIO'; //1\nconst TIPO_NATURAL = 'CLIENTE_NATURAL'; //2\nconst TIPO_JURIDICO = 'CLIENTE_JURIDICO'; //3\nconst TIPO_GERENTE = 'GERENTE'; //6\nconst TIPO_ADMIN = 'ADMIN'; //5\nconst TIPO_SA = 'SUPER_ADMIN'; //4\n\nexport default {\n  props: {\n    id: {\n      type: String,\n      default: () => {\n        return \"\";\n      }\n    }\n  },\n  data() {\n    return{\n      data_usuario:{\n        id: null,\n        numeroDocumento: '',\n        nombreRazonSocial:'',\n        correo:'',\n        direccion:'',\n        fechaNacimiento:'',\n        tipoDocumento:'',\n        telefono:'',\n        username:'',\n        idioma:'',\n        tipoUsuario: 0,\n        dniRepresentante: '',\n        nombreRepresentante: '',\n        dniContacto: '',\n        nombreContacto: '',\n        pais:'',\n        ciudad:'',\n        codigoOaci:'',\n        password:'',\n        confirmar_password:'',\n        idSede: -1\n      },\n      fecha_N: '',\n      tipo_juridico: false,\n      usuarios:[],\n      usuario: {},\n      sedes:[],\n      sede:{},\n      reg: /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,24}))$/,\n      type: [\"\", \"info\", \"success\", \"warning\", \"danger\"],\n      notifications: {\n        topCenter: false\n      }\n    }\n  },\n  methods:{\n    isEmailValid: function() {\n        let vue = this;\n        return (vue.data_usuario.correo == \" \")? \"\" : (vue.reg.test(vue.data_usuario.correo)) ? 'has-success' : 'has-error';\n    },\n    asignarTipo(usuario){\n      let vue = this;\n      vue.data_usuario.tipoUsuario = usuario.id;\n      if(usuario.id == 3)\n        vue.tipo_juridico = true;\n      else\n        vue.tipo_juridico = false;\n    },\n    obtenerCiudad(sede){\n      let vue = this;\n      vue.data_usuario.pais = sede.pais.nombre;\n      vue.data_usuario.ciudad = sede.pais.ciudad;\n      vue.data_usuario.codigoOaci = sede.codigoOaci;\n      vue.data_usuario.idSede = sede.id;\n    },\n    esCamposCompletos(){\n      let vue = this;\n\n      if(vue.data_usuario.tipoUsuario == 3){\n          if (vue.data_usuario.tipoUsuario != 0 && vue.data_usuario.codigoOaci != '' &&\n            vue.data_usuario.pais != '' && vue.data_usuario.ciudad != '' &&\n            vue.data_usuario.correo != '' && vue.data_usuario.username != '' &&\n            vue.data_usuario.password != '' && vue.data_usuario.nombreRazonSocial != '' &&\n            vue.data_usuario.numeroDocumento != '' && vue.data_usuario.telefono != '' &&\n            vue.data_usuario.direccion != '' &&\n            vue.data_usuario.tipoDocumento != '' && vue.data_usuario.dniRepresentante != '' &&\n            vue.data_usuario.nombreRepresentante != '' && vue.data_usuario.dniContacto != '' &&\n            vue.data_usuario.nombreContacto != '')\n          return true;\n          \n      }else{\n          if (vue.data_usuario.tipoUsuario != 0 && vue.data_usuario.codigoOaci != '' &&\n              vue.data_usuario.pais != '' && vue.data_usuario.ciudad != '' &&\n              vue.data_usuario.correo != '' && vue.data_usuario.username != '' &&\n              vue.data_usuario.password != '' && vue.data_usuario.nombreRazonSocial != '' &&\n              vue.data_usuario.numeroDocumento != '' && vue.data_usuario.telefono != '' &&\n              vue.data_usuario.direccion != '' && vue.data_usuario.fechaNacimiento != '' &&\n              vue.data_usuario.tipoDocumento != '')\n            return true;\n      }\n      return false;\n    },\n    notifyVue(verticalAlign, horizontalAlign,color,componente) {\n      //const color = 4;\n      //console.log(color);\n      this.$notify({\n        component: componente,\n        icon: \"tim-icons icon-bell-55\",\n        horizontalAlign: horizontalAlign,\n        verticalAlign: verticalAlign,\n        type: this.type[color],\n        timeout: 0\n      });\n    },\n    modificarUsuario(){\n      let vue = this;\n\n      if(vue.data_usuario.tipoUsuario != 3){\n        vue.data_usuario.fechaNacimiento = vue.fecha_N.substring(0,4) + \"-\" +\n                                           vue.fecha_N.substring(5,7) + \"-\" +\n                                           vue.fecha_N.substring(8,10);\n      }\n      if(vue.esCamposCompletos() && (vue.data_usuario.confirmar_password == vue.data_usuario.password)){\n\n        axios.post(vue.$store.state.appUri+'/usuarios/insertar', vue.data_usuario)\n        .then(response=>{\n          vue.notifyVue('top', 'center',2,NotificationTemplateModifiyUserSuccess);            \n        })\n        .catch(function (error) {\n          vue.notifyVue('top', 'center',4, NotificationTemplateRegisterUserError);\n          console.log(error);\n        });\n      }else{\n        vue.notifyVue('top', 'center',4, NotificationTemplateRegisterUserError);\n      }\n    },\n    registrarUsuario(){\n      let vue = this;\n      \n\n      if(vue.data_usuario.tipoUsuario != 3){\n        vue.data_usuario.fechaNacimiento = vue.fecha_N.substring(0,4) + \"-\" +\n                                           vue.fecha_N.substring(5,7) + \"-\" +\n                                           vue.fecha_N.substring(8,10);\n      }\n      \n\n      if(vue.esCamposCompletos() && (vue.data_usuario.confirmar_password == vue.data_usuario.password)){\n        \n        \n        axios.post(vue.$store.state.appUri+'/usuarios/insertar', vue.data_usuario)\n        .then(response=>{\n          vue.notifyVue('top', 'center',2,NotificationTemplateRegisterUserSuccess);\n          \n          vue.data_usuario.numeroDocumento='';\n          vue.data_usuario.nombreRazonSocial='';\n          vue.data_usuario.correo='';\n          vue.data_usuario.direccion='';\n          vue.data_usuario.fechaNacimiento='';\n          vue.data_usuario.tipoDocumento='';\n          vue.data_usuario.telefono='';\n          vue.data_usuario.username='';\n          vue.data_usuario.idioma='';\n          vue.data_usuario.tipoUsuario=0;\n          vue.data_usuario.dniRepresentante='';\n          vue.data_usuario.nombreRepresentante='';\n          vue.data_usuario.dniContacto='';\n          vue.data_usuario.nombreContacto='';\n          vue.data_usuario.pais='';\n          vue.data_usuario.ciudad='';\n          vue.data_usuario.codigoOaci='';\n          vue.data_usuario.password='';\n          vue.data_usuario.confirmar_password='';\n          vue.data_usuario.idSede=-1;\n\n          vue.fecha_N = '';\n          \n        })\n        .catch(function (error) {\n          vue.notifyVue('top', 'center',4,NotificationTemplateRegisterUserError);\n          console.log(error);\n        });\n      }else{\n        vue.notifyVue('top', 'center',4,NotificationTemplateRegisterUserError);\n      }\n    },\n    regresarAlListar: function(){\n      switch(Authentication.getProfile().tipoUsuario){\n        case TIPO_SA:\n          this.$router.push('/admin/usuarios');\n          break;\n        case TIPO_ADMIN:\n          this.$router.push('/admin/usuarios');\n          break;\n        case TIPO_GERENTE:\n          this.$router.push('/gerente/usuarios');\n          break;\n      }\n    }\n  },\n  mounted(){\n    let vue = this;\n    /*\n    vue.data_usuario.numeroDocumento = Authentication.getProfile().numeroDocumento;\n    axios.get(this.$store.state.appUri+'/usuarios/buscar/' + vue.data_usuario.numeroDocumento)\n    .then(function(response){\n        vue.data_usuario.id = response.data.usuario.id;\n        vue.data_usuario.email = response.data.usuario.correo;\n        vue.data_usuario.usuario = response.data.usuario.username;\n        vue.data_usuario.telefono = response.data.usuario.telefono;\n        vue.data_usuario.direccion = response.data.usuario.direccion;\n        vue.data_usuario.fecha_nacimiento = response.data.usuario.fecha_nacimiento.substring(0,4)+\"-\"+response.data.usuario.fecha_nacimiento.substring(5,7)+\"-\"+response.data.usuario.fecha_nacimiento.substring(8,10);\n        //console.log(response.data.usuario.fecha_nacimiento.substring(0,4)+\"-\"+response.data.usuario.fecha_nacimiento.substring(5,7)+\"-\"+response.data.usuario.fecha_nacimiento.substring(8,10));\n        vue.data_usuario.tipoUsuario = response.data.usuario.tipoUsuario;\n        vue.data_usuario.nombres = response.data.usuario.nombreRazonSocial;\n        vue.data_usuario.numeroDocumento = response.data.usuario.numeroDocumento;\n        vue.data_usuario.tipoDocumento = response.data.usuario.tipoDocumento;\n        vue.data_usuario.idioma = response.data.usuario.idioma;\n    });\n    */\n    if(vue.id == 'modificarUsuario'){\n      axios.get(vue.$store.state.appUri + '/usuarios/buscarPorId/' + vue.$route.params.idUsuario).then(function(response){\n        console.log(response.data);\n        // axios.get(vue.$store.state.appUri+'/usuarios/obtenerDatosSede/'+ vue.$route.params.idUsuario)\n        // .then(function(response){\n        //   vue.data_usuario.idSede = response.data.sede.id;\n        //   vue.data_usuario.codigoOaci = response.data.sede.codigoOaci;\n        //   vue.data_usuario.pais = response.data.sede.pais.nombre;\n        //   vue.data_usuario.ciudad = response.data.sede.pais.ciudad;\n        //   vue.sede = response.data.sede;\n        // });\n        \n        switch(response.data.usuario.tipoUsuario){\n          case TIPO_OPERARIO:\n            vue.data_usuario.tipoUsuario = 1;\n            vue.usuario = {id: 1, tipo: TIPO_OPERARIO};\n            break;\n          case TIPO_NATURAL:\n            vue.data_usuario.tipoUsuario = 2;\n            vue.usuario = {id: 2, tipo: TIPO_NATURAL};\n            break;\n          case TIPO_JURIDICO:\n            vue.data_usuario.tipoUsuario = 3;\n            vue.usuario = {id: 3, tipo: TIPO_JURIDICO};\n            vue.tipo_juridico = true;\n            break;\n          case TIPO_SA:\n            vue.data_usuario.tipoUsuario = 4;\n            vue.usuario = {id: 4, tipo: TIPO_SA};\n            break;\n          case TIPO_ADMIN:\n            vue.data_usuario.tipoUsuario = 5;\n            vue.usuario = {id: 5, tipo: TIPO_ADMIN};\n            break;\n          case TIPO_GERENTE:\n            vue.data_usuario.tipoUsuario = 6;\n            vue.usuario = {id: 6, tipo: TIPO_GERENTE};\n            break;\n\n        }\n        vue.data_usuario.id = vue.$route.params.idUsuario;\n        vue.data_usuario.numeroDocumento = response.data.usuario.numeroDocumento;\n        vue.data_usuario.nombreRazonSocial = response.data.usuario.nombreRazonSocial;\n        vue.data_usuario.correo = response.data.usuario.correo;\n        vue.data_usuario.direccion = response.data.usuario.direccion;\n        if(!vue.tipo_juridico){\n          vue.data_usuario.fechaNacimiento = response.data.usuario.fechaNacimiento.substring(0,4) + \"-\" +\n                                           response.data.usuario.fechaNacimiento.substring(5,7) + \"-\" +\n                                           response.data.usuario.fechaNacimiento.substring(8,10);\n        }\n        vue.data_usuario.tipoDocumento = response.data.usuario.tipoDocumento;\n        vue.data_usuario.telefono = response.data.usuario.telefono;\n        vue.data_usuario.username = response.data.usuario.username;\n        vue.data_usuario.idioma = response.data.usuario.idioma;\n        vue.data_usuario.dniRepresentante = response.data.usuario.representanteLegalDni;\n        vue.data_usuario.nombreRepresentante = response.data.usuario.representanteLegalNombre;\n        vue.data_usuario.dniContacto = response.data.usuario.dniContacto;\n        vue.data_usuario.nombreContacto = response.data.usuario.nombreContacto;\n        vue.data_usuario.idSede = response.data.idSede;\n        vue.data_usuario.codigoOaci = response.data.codigoOaci;\n        vue.data_usuario.pais = response.data.pais;\n        vue.data_usuario.ciudad = response.data.ciudad;\n\n        vue.fecha_N = vue.data_usuario.fechaNacimiento;\n\n        axios.get(vue.$store.state.appUri+'/sedes/listarSedes')\n        .then(function(response){\n          vue.sedes = response.data;\n          vue.sedes.forEach(element =>{\n            if (element.id == vue.data_usuario.idSede) vue.sede = element;\n          })\n        });\n      })\n    }\n\n    if(vue.id != 'modificarUsuario') {\n      axios.get(this.$store.state.appUri+'/sedes/listarSedes')\n      .then(function(response){\n        vue.sedes = response.data;\n      });\n    }\n\n    switch(Authentication.getProfile().tipoUsuario){\n      case TIPO_OPERARIO:\n        vue.usuarios=[];\n        vue.data_usuario.tipoDocumento = 'dni';\n        break;\n      case TIPO_NATURAL :\n        vue.usuarios=[];\n        vue.data_usuario.tipoDocumento = 'dni';\n        break;\n      case TIPO_JURIDICO:\n        vue.usuarios=[];\n        vue.data_usuario.tipoDocumento = 'ruc';\n        break;\n      case TIPO_GERENTE:\n        vue.usuarios=[\n            { id: 1, tipo: TIPO_OPERARIO }\n        ];\n        vue.data_usuario.tipoDocumento = 'dni';\n        vue.data_usuario.tipoUsuario = 1;\n        vue.usuario = vue.usuarios[0];\n        break;\n      case TIPO_ADMIN:\n        vue.usuarios=[\n            { id: 1, tipo: TIPO_OPERARIO },\n            { id: 2, tipo: TIPO_NATURAL },\n            { id: 3, tipo: TIPO_JURIDICO },\n            { id: 6, tipo: TIPO_GERENTE }\n        ];\n        vue.data_usuario.tipoDocumento = 'dni';\n        break;\n      case TIPO_SA:\n        vue.usuarios=[\n            { id: 1, tipo: TIPO_OPERARIO },\n            { id: 2, tipo: TIPO_NATURAL },\n            { id: 3, tipo: TIPO_JURIDICO },\n            { id: 4, tipo: TIPO_SA },\n            { id: 6, tipo: TIPO_GERENTE },\n            { id: 5, tipo: TIPO_ADMIN }\n        ];\n        vue.data_usuario.tipoDocumento = 'dni';\n        break;\n    }        \n  }\n}\n",{"version":3,"sources":["CreateProfile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6KA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateProfile.vue","sourceRoot":"src/pages/Profile","sourcesContent":["<template>\n  <card>\n    \n    <h5 slot=\"header\" class=\"title\" v-if=\"id != 'modificarUsuario'\">Registro de nuevo usuario</h5>\n    <h5 slot=\"header\" class=\"title\" v-else>Modificar datos de usuario</h5>\n\n    \n    <div class=\"row\">\n\n      <div class=\"col-md-3 pr-md-1\">\n        <div class=\"form-group\">\n          <slot name=\"label\">\n            <label class=\"control-label\">\n              Tipo Usuario\n            </label>\n          </slot>\n          <select class=\"input-group-prepend form-control\" v-model=\"usuario\" @change=\"asignarTipo(usuario)\">\n              <option style=\"color:black\" v-for=\"usuario in usuarios\" :key=\"usuario.id\" :value=\"usuario\">\n                {{usuario.tipo.replace('_', ' ')}}\n              </option>\n          </select>\n        </div>\n      </div>\n\n\n      <div class=\"col-md-4\">\n        <div class=\"col-md-6 pr-md-1 form-group\">\n          <slot name=\"label\">\n            <label class=\"control-label\">\n              País\n            </label>\n          </slot>\n          <select class=\"input-group-prepend form-control\" v-model=\"sede\" @change=\"obtenerCiudad(sede)\">\n              <option style=\"color:black\" v-for=\"sede in sedes\" :key=\"sede.id\" :value=\"sede\">\n                {{sede.pais.nombre}}\n              </option>\n          </select>\n        </div>\n      </div>\n\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col-md-5 pr-md-1\">\n        <base-input label=\"Nombres y Apellidos\"\n                  v-model=\"data_usuario.nombreRazonSocial\"                  \n                  placeholder=\"Nombres y apellidos\">\n        </base-input>\n      </div>\n    </div>\n\n    <div class=\"row\">  \n      <div class=\"col-md-5 pr-md-1\">\n        <base-input label=\"DNI o RUC\"\n                  v-model=\"data_usuario.numeroDocumento\"\n                  placeholder=\"DNI o RUC\">\n        </base-input>\n      </div>\n    </div>\n\n    <div class=\"row\">  \n      <div class=\"col-md-5 pr-md-1\">\n        <base-input label=\"Nombre representante legal\"\n                  v-if=\"tipo_juridico\"\n                  v-model=\"data_usuario.nombreRepresentante\"\n                  placeholder=\"Nombre representante legal\">\n        </base-input>\n      </div>\n    </div>\n\n    <div class=\"row\">  \n      <div class=\"col-md-5 pr-md-1\">\n        <base-input label=\"DNI representante legal\"\n                  v-if=\"tipo_juridico\"\n                  v-model=\"data_usuario.dniRepresentante\"\n                  placeholder=\"DNI representante legal\">\n        </base-input>\n      </div>\n    </div>\n\n    <div class=\"row\">  \n      <div class=\"col-md-5 pr-md-1\">\n        <base-input label=\"Nombre contacto\"\n                  v-if=\"tipo_juridico\"\n                  v-model=\"data_usuario.nombreContacto\"\n                  placeholder=\"Nombre contacto\">\n        </base-input>\n      </div>\n    </div>\n\n    <div class=\"row\">  \n      <div class=\"col-md-5 pr-md-1\">\n        <base-input label=\"DNI contacto\"\n                  v-if=\"tipo_juridico\"\n                  v-model=\"data_usuario.dniContacto\"\n                  placeholder=\"DNI contacto\">\n        </base-input>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col-md-5 pr-md-1\" v-bind:class=\"[isEmailValid()]\">\n        <base-input label=\"Email address\"\n                  v-model=\"data_usuario.correo\"\n                  type=\"email\"\n                  placeholder=\"mike@email.com\">\n        </base-input>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-8\">\n        <base-input label=\"Dirección\"\n                  v-model=\"data_usuario.direccion\"\n                  placeholder=\"Dirección\">\n        </base-input>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-4 pr-md-1\">\n        <base-input label=\"Teléfono\"\n                  v-model=\"data_usuario.telefono\"\n                  placeholder=\"Teléfono\">\n        </base-input>\n      </div>\n      <div class=\"col-md-4 pr-md-1\">\n        <base-input type=\"date\"\n                  v-if=\"!tipo_juridico\"\n                  label=\"Fecha de nacimiento\"\n                  format= \"yyyy-MM-dd\"\n                  v-model=\"fecha_N\">\n        </base-input>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-4 pr-md-1\">\n        <base-input label=\"Nombre de usuario\"\n            v-model=\"data_usuario.username\"\n            placeholder=\"Nombre de usuario\">\n        </base-input>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-4 pr-md-1\">\n        <base-input type=\"password\"\n            v-model=\"data_usuario.password\"\n            label=\"Contraseña\"\n            placeholder=\"Contraseña\">\n        </base-input>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-4 pr-md-1\">\n        <base-input type=\"password\"\n            v-model=\"data_usuario.confirmar_password\"\n            label=\"Confirmar contraseña\"\n            placeholder=\"Confirmar contraseña\">\n        </base-input>\n      </div>\n    </div>\n    <b-button v-b-modal.modal-save slot=\"footer\" type=\"primary\" class=\"btn-primary\" fill v-if=\"id != 'modificarUsuario'\">Crear usuario</b-button>\n    <b-button v-b-modal.modal-modify slot=\"footer\" type=\"primary\" class=\"btn-primary\" fill v-else>Modificar usuario</b-button>\n    <b-modal id=\"modal-save\" title=\"Agregar Usuario\"\n        @ok=\"registrarUsuario\">\n        ¿Deseas registrar el usuario?\n    </b-modal>\n    <b-modal id=\"modal-modify\" title=\"Modificar Usuario\"\n        @ok=\"modificarUsuario\">\n        ¿Deseas modificar los datos del usuario?\n    </b-modal>\n    <b-button slot=\"footer\" fill @click=\"regresarAlListar()\">Regresar</b-button>\n  </card>\n</template>\n<script>\n  import axios from 'axios';\n  import Authentication from '@/store/authentication.js';\n\n  import NotificationTemplateRegisterUserSuccess from '../Notifications/NotificationTemplateRegisterUserSuccess'; \n  import NotificationTemplateModifiyUserSuccess from '../Notifications/NotificationTemplateModifiyUserSuccess';\n  import NotificationTemplateRegisterUserError from '../Notifications/NotificationTemplateRegisterUserError';\n\n  const TIPO_OPERARIO = 'OPERARIO'; //1\n  const TIPO_NATURAL = 'CLIENTE_NATURAL'; //2\n  const TIPO_JURIDICO = 'CLIENTE_JURIDICO'; //3\n  const TIPO_GERENTE = 'GERENTE'; //6\n  const TIPO_ADMIN = 'ADMIN'; //5\n  const TIPO_SA = 'SUPER_ADMIN'; //4\n\n  export default {\n    props: {\n      id: {\n        type: String,\n        default: () => {\n          return \"\";\n        }\n      }\n    },\n    data() {\n      return{\n        data_usuario:{\n          id: null,\n          numeroDocumento: '',\n          nombreRazonSocial:'',\n          correo:'',\n          direccion:'',\n          fechaNacimiento:'',\n          tipoDocumento:'',\n          telefono:'',\n          username:'',\n          idioma:'',\n          tipoUsuario: 0,\n          dniRepresentante: '',\n          nombreRepresentante: '',\n          dniContacto: '',\n          nombreContacto: '',\n          pais:'',\n          ciudad:'',\n          codigoOaci:'',\n          password:'',\n          confirmar_password:'',\n          idSede: -1\n        },\n        fecha_N: '',\n        tipo_juridico: false,\n        usuarios:[],\n        usuario: {},\n        sedes:[],\n        sede:{},\n        reg: /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,24}))$/,\n        type: [\"\", \"info\", \"success\", \"warning\", \"danger\"],\n        notifications: {\n          topCenter: false\n        }\n      }\n    },\n    methods:{\n      isEmailValid: function() {\n          let vue = this;\n          return (vue.data_usuario.correo == \" \")? \"\" : (vue.reg.test(vue.data_usuario.correo)) ? 'has-success' : 'has-error';\n      },\n      asignarTipo(usuario){\n        let vue = this;\n        vue.data_usuario.tipoUsuario = usuario.id;\n        if(usuario.id == 3)\n          vue.tipo_juridico = true;\n        else\n          vue.tipo_juridico = false;\n      },\n      obtenerCiudad(sede){\n        let vue = this;\n        vue.data_usuario.pais = sede.pais.nombre;\n        vue.data_usuario.ciudad = sede.pais.ciudad;\n        vue.data_usuario.codigoOaci = sede.codigoOaci;\n        vue.data_usuario.idSede = sede.id;\n      },\n      esCamposCompletos(){\n        let vue = this;\n\n        if(vue.data_usuario.tipoUsuario == 3){\n            if (vue.data_usuario.tipoUsuario != 0 && vue.data_usuario.codigoOaci != '' &&\n              vue.data_usuario.pais != '' && vue.data_usuario.ciudad != '' &&\n              vue.data_usuario.correo != '' && vue.data_usuario.username != '' &&\n              vue.data_usuario.password != '' && vue.data_usuario.nombreRazonSocial != '' &&\n              vue.data_usuario.numeroDocumento != '' && vue.data_usuario.telefono != '' &&\n              vue.data_usuario.direccion != '' &&\n              vue.data_usuario.tipoDocumento != '' && vue.data_usuario.dniRepresentante != '' &&\n              vue.data_usuario.nombreRepresentante != '' && vue.data_usuario.dniContacto != '' &&\n              vue.data_usuario.nombreContacto != '')\n            return true;\n            \n        }else{\n            if (vue.data_usuario.tipoUsuario != 0 && vue.data_usuario.codigoOaci != '' &&\n                vue.data_usuario.pais != '' && vue.data_usuario.ciudad != '' &&\n                vue.data_usuario.correo != '' && vue.data_usuario.username != '' &&\n                vue.data_usuario.password != '' && vue.data_usuario.nombreRazonSocial != '' &&\n                vue.data_usuario.numeroDocumento != '' && vue.data_usuario.telefono != '' &&\n                vue.data_usuario.direccion != '' && vue.data_usuario.fechaNacimiento != '' &&\n                vue.data_usuario.tipoDocumento != '')\n              return true;\n        }\n        return false;\n      },\n      notifyVue(verticalAlign, horizontalAlign,color,componente) {\n        //const color = 4;\n        //console.log(color);\n        this.$notify({\n          component: componente,\n          icon: \"tim-icons icon-bell-55\",\n          horizontalAlign: horizontalAlign,\n          verticalAlign: verticalAlign,\n          type: this.type[color],\n          timeout: 0\n        });\n      },\n      modificarUsuario(){\n        let vue = this;\n\n        if(vue.data_usuario.tipoUsuario != 3){\n          vue.data_usuario.fechaNacimiento = vue.fecha_N.substring(0,4) + \"-\" +\n                                             vue.fecha_N.substring(5,7) + \"-\" +\n                                             vue.fecha_N.substring(8,10);\n        }\n        if(vue.esCamposCompletos() && (vue.data_usuario.confirmar_password == vue.data_usuario.password)){\n\n          axios.post(vue.$store.state.appUri+'/usuarios/insertar', vue.data_usuario)\n          .then(response=>{\n            vue.notifyVue('top', 'center',2,NotificationTemplateModifiyUserSuccess);            \n          })\n          .catch(function (error) {\n            vue.notifyVue('top', 'center',4, NotificationTemplateRegisterUserError);\n            console.log(error);\n          });\n        }else{\n          vue.notifyVue('top', 'center',4, NotificationTemplateRegisterUserError);\n        }\n      },\n      registrarUsuario(){\n        let vue = this;\n        \n\n        if(vue.data_usuario.tipoUsuario != 3){\n          vue.data_usuario.fechaNacimiento = vue.fecha_N.substring(0,4) + \"-\" +\n                                             vue.fecha_N.substring(5,7) + \"-\" +\n                                             vue.fecha_N.substring(8,10);\n        }\n        \n\n        if(vue.esCamposCompletos() && (vue.data_usuario.confirmar_password == vue.data_usuario.password)){\n          \n          \n          axios.post(vue.$store.state.appUri+'/usuarios/insertar', vue.data_usuario)\n          .then(response=>{\n            vue.notifyVue('top', 'center',2,NotificationTemplateRegisterUserSuccess);\n            \n            vue.data_usuario.numeroDocumento='';\n            vue.data_usuario.nombreRazonSocial='';\n            vue.data_usuario.correo='';\n            vue.data_usuario.direccion='';\n            vue.data_usuario.fechaNacimiento='';\n            vue.data_usuario.tipoDocumento='';\n            vue.data_usuario.telefono='';\n            vue.data_usuario.username='';\n            vue.data_usuario.idioma='';\n            vue.data_usuario.tipoUsuario=0;\n            vue.data_usuario.dniRepresentante='';\n            vue.data_usuario.nombreRepresentante='';\n            vue.data_usuario.dniContacto='';\n            vue.data_usuario.nombreContacto='';\n            vue.data_usuario.pais='';\n            vue.data_usuario.ciudad='';\n            vue.data_usuario.codigoOaci='';\n            vue.data_usuario.password='';\n            vue.data_usuario.confirmar_password='';\n            vue.data_usuario.idSede=-1;\n\n            vue.fecha_N = '';\n            \n          })\n          .catch(function (error) {\n            vue.notifyVue('top', 'center',4,NotificationTemplateRegisterUserError);\n            console.log(error);\n          });\n        }else{\n          vue.notifyVue('top', 'center',4,NotificationTemplateRegisterUserError);\n        }\n      },\n      regresarAlListar: function(){\n        switch(Authentication.getProfile().tipoUsuario){\n          case TIPO_SA:\n            this.$router.push('/admin/usuarios');\n            break;\n          case TIPO_ADMIN:\n            this.$router.push('/admin/usuarios');\n            break;\n          case TIPO_GERENTE:\n            this.$router.push('/gerente/usuarios');\n            break;\n        }\n      }\n    },\n    mounted(){\n      let vue = this;\n      /*\n      vue.data_usuario.numeroDocumento = Authentication.getProfile().numeroDocumento;\n      axios.get(this.$store.state.appUri+'/usuarios/buscar/' + vue.data_usuario.numeroDocumento)\n      .then(function(response){\n          vue.data_usuario.id = response.data.usuario.id;\n          vue.data_usuario.email = response.data.usuario.correo;\n          vue.data_usuario.usuario = response.data.usuario.username;\n          vue.data_usuario.telefono = response.data.usuario.telefono;\n          vue.data_usuario.direccion = response.data.usuario.direccion;\n          vue.data_usuario.fecha_nacimiento = response.data.usuario.fecha_nacimiento.substring(0,4)+\"-\"+response.data.usuario.fecha_nacimiento.substring(5,7)+\"-\"+response.data.usuario.fecha_nacimiento.substring(8,10);\n          //console.log(response.data.usuario.fecha_nacimiento.substring(0,4)+\"-\"+response.data.usuario.fecha_nacimiento.substring(5,7)+\"-\"+response.data.usuario.fecha_nacimiento.substring(8,10));\n          vue.data_usuario.tipoUsuario = response.data.usuario.tipoUsuario;\n          vue.data_usuario.nombres = response.data.usuario.nombreRazonSocial;\n          vue.data_usuario.numeroDocumento = response.data.usuario.numeroDocumento;\n          vue.data_usuario.tipoDocumento = response.data.usuario.tipoDocumento;\n          vue.data_usuario.idioma = response.data.usuario.idioma;\n      });\n      */\n      if(vue.id == 'modificarUsuario'){\n        axios.get(vue.$store.state.appUri + '/usuarios/buscarPorId/' + vue.$route.params.idUsuario).then(function(response){\n          console.log(response.data);\n          // axios.get(vue.$store.state.appUri+'/usuarios/obtenerDatosSede/'+ vue.$route.params.idUsuario)\n          // .then(function(response){\n          //   vue.data_usuario.idSede = response.data.sede.id;\n          //   vue.data_usuario.codigoOaci = response.data.sede.codigoOaci;\n          //   vue.data_usuario.pais = response.data.sede.pais.nombre;\n          //   vue.data_usuario.ciudad = response.data.sede.pais.ciudad;\n          //   vue.sede = response.data.sede;\n          // });\n          \n          switch(response.data.usuario.tipoUsuario){\n            case TIPO_OPERARIO:\n              vue.data_usuario.tipoUsuario = 1;\n              vue.usuario = {id: 1, tipo: TIPO_OPERARIO};\n              break;\n            case TIPO_NATURAL:\n              vue.data_usuario.tipoUsuario = 2;\n              vue.usuario = {id: 2, tipo: TIPO_NATURAL};\n              break;\n            case TIPO_JURIDICO:\n              vue.data_usuario.tipoUsuario = 3;\n              vue.usuario = {id: 3, tipo: TIPO_JURIDICO};\n              vue.tipo_juridico = true;\n              break;\n            case TIPO_SA:\n              vue.data_usuario.tipoUsuario = 4;\n              vue.usuario = {id: 4, tipo: TIPO_SA};\n              break;\n            case TIPO_ADMIN:\n              vue.data_usuario.tipoUsuario = 5;\n              vue.usuario = {id: 5, tipo: TIPO_ADMIN};\n              break;\n            case TIPO_GERENTE:\n              vue.data_usuario.tipoUsuario = 6;\n              vue.usuario = {id: 6, tipo: TIPO_GERENTE};\n              break;\n\n          }\n          vue.data_usuario.id = vue.$route.params.idUsuario;\n          vue.data_usuario.numeroDocumento = response.data.usuario.numeroDocumento;\n          vue.data_usuario.nombreRazonSocial = response.data.usuario.nombreRazonSocial;\n          vue.data_usuario.correo = response.data.usuario.correo;\n          vue.data_usuario.direccion = response.data.usuario.direccion;\n          if(!vue.tipo_juridico){\n            vue.data_usuario.fechaNacimiento = response.data.usuario.fechaNacimiento.substring(0,4) + \"-\" +\n                                             response.data.usuario.fechaNacimiento.substring(5,7) + \"-\" +\n                                             response.data.usuario.fechaNacimiento.substring(8,10);\n          }\n          vue.data_usuario.tipoDocumento = response.data.usuario.tipoDocumento;\n          vue.data_usuario.telefono = response.data.usuario.telefono;\n          vue.data_usuario.username = response.data.usuario.username;\n          vue.data_usuario.idioma = response.data.usuario.idioma;\n          vue.data_usuario.dniRepresentante = response.data.usuario.representanteLegalDni;\n          vue.data_usuario.nombreRepresentante = response.data.usuario.representanteLegalNombre;\n          vue.data_usuario.dniContacto = response.data.usuario.dniContacto;\n          vue.data_usuario.nombreContacto = response.data.usuario.nombreContacto;\n          vue.data_usuario.idSede = response.data.idSede;\n          vue.data_usuario.codigoOaci = response.data.codigoOaci;\n          vue.data_usuario.pais = response.data.pais;\n          vue.data_usuario.ciudad = response.data.ciudad;\n\n          vue.fecha_N = vue.data_usuario.fechaNacimiento;\n\n          axios.get(vue.$store.state.appUri+'/sedes/listarSedes')\n          .then(function(response){\n            vue.sedes = response.data;\n            vue.sedes.forEach(element =>{\n              if (element.id == vue.data_usuario.idSede) vue.sede = element;\n            })\n          });\n        })\n      }\n\n      if(vue.id != 'modificarUsuario') {\n        axios.get(this.$store.state.appUri+'/sedes/listarSedes')\n        .then(function(response){\n          vue.sedes = response.data;\n        });\n      }\n\n      switch(Authentication.getProfile().tipoUsuario){\n        case TIPO_OPERARIO:\n          vue.usuarios=[];\n          vue.data_usuario.tipoDocumento = 'dni';\n          break;\n        case TIPO_NATURAL :\n          vue.usuarios=[];\n          vue.data_usuario.tipoDocumento = 'dni';\n          break;\n        case TIPO_JURIDICO:\n          vue.usuarios=[];\n          vue.data_usuario.tipoDocumento = 'ruc';\n          break;\n        case TIPO_GERENTE:\n          vue.usuarios=[\n              { id: 1, tipo: TIPO_OPERARIO }\n          ];\n          vue.data_usuario.tipoDocumento = 'dni';\n          vue.data_usuario.tipoUsuario = 1;\n          vue.usuario = vue.usuarios[0];\n          break;\n        case TIPO_ADMIN:\n          vue.usuarios=[\n              { id: 1, tipo: TIPO_OPERARIO },\n              { id: 2, tipo: TIPO_NATURAL },\n              { id: 3, tipo: TIPO_JURIDICO },\n              { id: 6, tipo: TIPO_GERENTE }\n          ];\n          vue.data_usuario.tipoDocumento = 'dni';\n          break;\n        case TIPO_SA:\n          vue.usuarios=[\n              { id: 1, tipo: TIPO_OPERARIO },\n              { id: 2, tipo: TIPO_NATURAL },\n              { id: 3, tipo: TIPO_JURIDICO },\n              { id: 4, tipo: TIPO_SA },\n              { id: 6, tipo: TIPO_GERENTE },\n              { id: 5, tipo: TIPO_ADMIN }\n          ];\n          vue.data_usuario.tipoDocumento = 'dni';\n          break;\n      }        \n    }\n  }\n</script>\n<style>\n</style>\n"]}]}