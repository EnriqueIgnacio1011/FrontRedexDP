{"remainingRequest":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\src\\pages\\Operario\\RegisterPackage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\src\\pages\\Operario\\RegisterPackage.vue","mtime":1596683947000},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713478866974},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\babel-loader\\lib\\index.js","mtime":1713478866263},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713478866974},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\vue-loader\\lib\\index.js","mtime":1713478868660}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { BaseTable } from \"@/components\";\nimport axios from 'axios';\nimport NotificationTemplate from '../Notifications/NotificationTemplate';\nimport NotificationTemplatePaqueteSuccess from '../Notifications/NotificationTemplatePaqueteSuccess';\nimport NotificationTemplatePaqueteError from '../Notifications/NotificationTemplatePaqueteError';\nimport { BaseAlert } from '@/components';\nimport listadoPaquetes from \"../Operario/listadoPaquetes\";\n\nimport Authentication from '@/store/authentication.js';\n\nconst tableColumns =  [\"Descripcion\", \"Categoria\"];\n\nexport default {\n  components: {\n    BaseTable,\n    listadoPaquetes\n  },\n  data() {\n    return {\n      table1: {\n        title: \"Registro paquetes\",\n        columns: [...tableColumns],\n        data: []\n      },\n      data_usuario:{\n        id:'',\n        sedeOrigen: '',\n        pais: ''\n        /*\n        numeroDocumento: '',\n        nombres:'',\n        email:'',\n        direccion:'',\n        fechaNacimiento:'',\n        tipoDocumento:'',\n        telefono:'',\n        usuario:'',\n        idioma:'',\n        tipoUsuario:'',\n        password:'',\n        confirmar_password:'',\n        */\n      },\n      paises:[],\n      pais:{},\n      sedes:[],\n      sede:{},\n      ciudad:\"\",\n      clientes:[],\n      categorias:[],\n      categoria:{},\n      dniinput:\"\",\n      cliente:{},\n\n      paquete:[],\n\n      email: '',\n      reg: /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,24}))$/,\n\n      type: [\"\", \"info\", \"success\", \"warning\", \"danger\"],\n      notifications: {\n        topCenter: false\n      }\n\n    };\n  },\n  mounted(){\n    let vue = this;\n\n\n    var date = new Date();\n    var day = date.getDate();\n    var month = date.getMonth() + 1;\n    var year = date.getFullYear();\n    var hour = date.getUTCHours();\n    var min = date.getUTCMinutes();\n    console.log(\"Hora\");\n    console.log(day.toString().slice(-2) + month.toString().slice(-2) + year.toString().slice(-2) + hour.toString().slice(-2) + min.toString().slice(-2));\n\n    vue.data_usuario.id = Authentication.getProfile().id;\n\n    axios.get(this.$store.state.appUri+'/usuarios/obtenerDatosSede/' + vue.data_usuario.id)\n    .then(function(response){\n      vue.data_usuario.sedeOrigen = response.data.sede.codigoOaci;\n      vue.data_usuario.pais = response.data.sede.pais.nombre;\n    }),\n\n    axios.get(this.$store.state.appUri+'/sedes/listarSedes')\n    .then(function(response){\n      vue.sedes = response.data;\n    }),\n    axios.get(this.$store.state.appUri+'/usuarios/listar')\n    .then(function(response){\n      vue.clientes = response.data;\n    }),\n    axios.get(this.$store.state.appUri+'/categorias/findAll')\n    .then(function(response){\n      vue.categorias = response.data;\n    })\n  },\n  methods:{\n    filterClient:function(numeroDocumento){\n      let vue = this;\n      var lista = vue.clientes.filter(\n        function(cust){\n          return cust.numeroDocumento==numeroDocumento\n        }\n      )\n      vue.cliente = lista[0];\n    },\n    addItem(){\n\n      let date = new Date();\n      let day = date.getDate();\n      let month = date.getMonth() + 1;\n      let year = date.getFullYear();\n      let hour = date.getUTCHours();\n      let min = date.getUTCMinutes();\n\n      \n      console.log(day+month+year+hour+min);\n      if(this.categoria.id == null || this.paquete.descripcion == null || this.email == null){\n          this.notifyVue('top', 'center',4,NotificationTemplatePaqueteError);\n          return;\n      }\n\n      \n\n      var paquete = {\n        oaci_sede_origen:this.paquete.oaci_sede_origen,\n        oaci_sede_destino:this.paquete.oaci_sede_destino,\n        id_categoria:this.categoria.id,\n        descripcion:this.paquete.descripcion,\n        fecha_registro:\"2020-05-18T08:34:00.000\", // COLOCAR FECHA ACTUAL\n        estado:\"EN_ALMACEN\",\n        numeroDocumento:this.dniinput,\n        codigo:     this.paquete.oaci_sede_origen + \"-\" +\n                    year.toString()+month.toString()+day.toString()+\"-\"+\n                    hour.toString()+\":\"+min.toString()+\"-\"+\n                    this.oaci_sede_destino\n      }\n      var paqueteTabla = {\n        descripcion:this.paquete.descripcion,\n        categoria:this.categoria.descripcion          \n      }\n      this.table1.data.push(paqueteTabla);\n      this.paquete.push(paquete);\n      //console.log(this.paquete);\n      //console.log(this.categoria);\n    },\n    obtenerCategoria(categoria){\n        this.categoria = categoria;\n        //console.log(categoria);\n    },\n    obtenerCiudad(sede){\n      let vue = this;\n        vue.ciudad = sede.pais.ciudad;\n        vue.paquete.oaci_sede_origen = vue.data_usuario.sedeOrigen;\n        vue.paquete.oaci_sede_destino = sede.codigoOaci;\n        //console.log(this.ciudad);\n    },\n    isEmailValid: function() {\n        return (this.email == \" \")? \"\" : (this.reg.test(this.email)) ? 'has-success' : 'has-error';\n    },\n    isPackageEmpty: function() {\n        return (this.table1.data.length == 0) ? this.notifyVue('top', 'center',4,NotificationTemplatePaqueteError) : 'has-error';\n    },\n    notifyVue(verticalAlign, horizontalAlign,color,componente) {\n      //const color = 4;\n      //console.log(color);\n      this.$notify({\n        component: componente,\n        icon: \"tim-icons icon-bell-55\",\n        horizontalAlign: horizontalAlign,\n        verticalAlign: verticalAlign,\n        type: this.type[color],\n        timeout: 0\n      });\n    },\n    enviarPaquete(){\n      let vue = this;\n\n      if(this.table1.data.length == 0 || this.email==null || this.dniinput==null || this.cliente.nombreRazonSocial==null ){\n        this.notifyVue('top', 'center',4,NotificationTemplatePaqueteError);\n      }else{\n          axios.post(vue.$store.state.appUri+'/paquetes/insertarLista', vue.paquete)\n          .then(response => {})\n          .catch(e => {\n            vue.errors.push(e)\n          });\n          vue.paquete = [];\n          vue.table1.data = [];\n          this.notifyVue('top', 'center',2,NotificationTemplatePaqueteSuccess)\n      }\n    },\n    regresarAlListar(){\n      this.$router.push('listadoPaquetes');\n    }\n  },\n  props: {\n\n  }\n}\n",{"version":3,"sources":["RegisterPackage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwIA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"RegisterPackage.vue","sourceRoot":"src/pages/Operario","sourcesContent":["<template>\n  <card>\n    <h5 slot=\"header\" class=\"title\">Registrar paquete</h5>\n\n    <div class=\"row\">\n      <div class=\"col-md-5 pr-md-1\">\n        <base-input label=\"Código tracking (disabled)\"\n                  placeholder=\"Company\"\n                  disabled>\n        </base-input>\n      </div>\n    </div>\n\n\n\n    <div class=\"row\">\n\n      \n\n      <div class=\"col-md-4\">\n        <div class=\"col-md-10 pr-md-1\">\n          <base-input label=\"País origen\"\n                    :placeholder=\"data_usuario.pais\"\n                    disabled>                    \n          </base-input>\n        </div>\n        <div class=\"col-md-10 pr-md-1\">\n          <base-input label=\"DNI / RUC\"\n                    placeholder=\"DNI o RUC\" v-model=\"dniinput\"\n                    @keypress.enter=\"filterClient(dniinput)\">\n          </base-input>\n        </div>\n        <div class=\"col-md-10 pr-md-1\">\n          <base-input label=\"Nombres y Apellidos\"\n                    placeholder=\"Nombres y Apellidos\"\n                    v-model=\"cliente.nombreRazonSocial\"  style=\"color:white\" >\n          </base-input>\n        </div>\n        <div class=\"col-md-10 pr-md-1\" >\n          <base-input label=\"Email\"\n                    type=\"email\"\n                    placeholder=\"email@email.com\"\n                    v-model=\"cliente.correo\">\n          </base-input>\n        </div>\n\n        \n      </div>\n      \n\n\n      <div class=\"col-md-4\">\n        \n        <div class=\"col-md-10 pr-md-1 form-group\">\n          <slot name=\"label\">\n            <label class=\"control-label\">\n              País\n            </label>\n          </slot>\n          <select class=\"input-group-prepend form-control\" v-model=\"sede\" @change=\"obtenerCiudad(sede)\">\n              <option style=\"color:black\" v-for=\"sede in sedes\" :key=\"sede.id\" :value=\"sede\">\n                {{sede.pais.nombre}}\n              </option>\n          </select>\n        </div>\n        <div class=\"col-md-10 pr-md-1\" v-bind:class=\"[isEmailValid()]\">\n          <base-input label=\"Email\"\n                    type=\"email\"\n                    placeholder=\"email@email.com\"\n                    v-model=\"email\">\n          </base-input>\n        </div>\n        <div class=\"col-md-10 pr-md-1\">\n          <base-input label=\"Dirección\"\n                    placeholder=\"Dirección\">\n          </base-input>\n        </div>\n        <div class=\"col-md-10 pr-md-1\">\n          <base-input label=\"Ciudad\"\n              placeholder=\"Ciudad\"\n              v-model=\"ciudad\">\n          </base-input>\n        </div>\n      </div>\n\n\n\n\n\n      <div class=\"col-md-4\">\n        \n        <base-button slot=\"footer\" type=\"primary\" fill v-on:click=\"addItem\">Añadir Paquete</base-button>\n\n        <div class=\"col-md-6 pr-md-1 form-group\">\n          <slot name=\"label\">\n            <label class=\"control-label\">\n              Categoria\n            </label>\n          </slot>\n          <select class=\"input-group-prepend form-control\" v-model=\"categoria\">\n              <option style=\"color:black\" v-for=\"categoria in categorias\" :key=\"categoria.id\" :value=\"categoria\">\n                {{categoria.descripcion}}\n              </option>\n          </select>\n        </div>\n        <div class=\"col-md-8\">\n          <base-input>\n          <label>Descripción del paquete</label>\n            <textarea rows=\"4\" cols=\"80\"\n                class=\"form-control\"\n                placeholder=\"Colocar alguna descripción del paquete\" v-model=\"paquete.descripcion\">\n            </textarea>\n          </base-input>\n        </div>\n        <card title=\"Lista de paquetes\">\n          <div>\n            <base-table :data=\"table1.data\"\n                  :columns=\"table1.columns\"\n                  thead-classes=\"text-primary\">\n            </base-table>\n          </div>\n        </card>\n      </div>\n\n      \n\n    </div>\n  \n    <base-button slot=\"footer\" type=\"primary\" fill @click=\"enviarPaquete()\">Registrar Paquete</base-button>\n    <base-button slot=\"footer\" fill @click=\"regresarAlListar()\">Regresar</base-button>\n\n  </card>\n</template>\n\n\n<script>\n  import { BaseTable } from \"@/components\";\n  import axios from 'axios';\n  import NotificationTemplate from '../Notifications/NotificationTemplate';\n  import NotificationTemplatePaqueteSuccess from '../Notifications/NotificationTemplatePaqueteSuccess';\n  import NotificationTemplatePaqueteError from '../Notifications/NotificationTemplatePaqueteError';\n  import { BaseAlert } from '@/components';\n  import listadoPaquetes from \"../Operario/listadoPaquetes\";\n\n  import Authentication from '@/store/authentication.js';\n\n  const tableColumns =  [\"Descripcion\", \"Categoria\"];\n\n  export default {\n    components: {\n      BaseTable,\n      listadoPaquetes\n    },\n    data() {\n      return {\n        table1: {\n          title: \"Registro paquetes\",\n          columns: [...tableColumns],\n          data: []\n        },\n        data_usuario:{\n          id:'',\n          sedeOrigen: '',\n          pais: ''\n          /*\n          numeroDocumento: '',\n          nombres:'',\n          email:'',\n          direccion:'',\n          fechaNacimiento:'',\n          tipoDocumento:'',\n          telefono:'',\n          usuario:'',\n          idioma:'',\n          tipoUsuario:'',\n          password:'',\n          confirmar_password:'',\n          */\n        },\n        paises:[],\n        pais:{},\n        sedes:[],\n        sede:{},\n        ciudad:\"\",\n        clientes:[],\n        categorias:[],\n        categoria:{},\n        dniinput:\"\",\n        cliente:{},\n\n        paquete:[],\n\n        email: '',\n        reg: /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,24}))$/,\n\n        type: [\"\", \"info\", \"success\", \"warning\", \"danger\"],\n        notifications: {\n          topCenter: false\n        }\n\n      };\n    },\n    mounted(){\n      let vue = this;\n\n\n      var date = new Date();\n      var day = date.getDate();\n      var month = date.getMonth() + 1;\n      var year = date.getFullYear();\n      var hour = date.getUTCHours();\n      var min = date.getUTCMinutes();\n      console.log(\"Hora\");\n      console.log(day.toString().slice(-2) + month.toString().slice(-2) + year.toString().slice(-2) + hour.toString().slice(-2) + min.toString().slice(-2));\n\n      vue.data_usuario.id = Authentication.getProfile().id;\n\n      axios.get(this.$store.state.appUri+'/usuarios/obtenerDatosSede/' + vue.data_usuario.id)\n      .then(function(response){\n        vue.data_usuario.sedeOrigen = response.data.sede.codigoOaci;\n        vue.data_usuario.pais = response.data.sede.pais.nombre;\n      }),\n\n      axios.get(this.$store.state.appUri+'/sedes/listarSedes')\n      .then(function(response){\n        vue.sedes = response.data;\n      }),\n      axios.get(this.$store.state.appUri+'/usuarios/listar')\n      .then(function(response){\n        vue.clientes = response.data;\n      }),\n      axios.get(this.$store.state.appUri+'/categorias/findAll')\n      .then(function(response){\n        vue.categorias = response.data;\n      })\n    },\n    methods:{\n      filterClient:function(numeroDocumento){\n        let vue = this;\n        var lista = vue.clientes.filter(\n          function(cust){\n            return cust.numeroDocumento==numeroDocumento\n          }\n        )\n        vue.cliente = lista[0];\n      },\n      addItem(){\n\n        let date = new Date();\n        let day = date.getDate();\n        let month = date.getMonth() + 1;\n        let year = date.getFullYear();\n        let hour = date.getUTCHours();\n        let min = date.getUTCMinutes();\n\n        \n        console.log(day+month+year+hour+min);\n        if(this.categoria.id == null || this.paquete.descripcion == null || this.email == null){\n            this.notifyVue('top', 'center',4,NotificationTemplatePaqueteError);\n            return;\n        }\n\n        \n\n        var paquete = {\n          oaci_sede_origen:this.paquete.oaci_sede_origen,\n          oaci_sede_destino:this.paquete.oaci_sede_destino,\n          id_categoria:this.categoria.id,\n          descripcion:this.paquete.descripcion,\n          fecha_registro:\"2020-05-18T08:34:00.000\", // COLOCAR FECHA ACTUAL\n          estado:\"EN_ALMACEN\",\n          numeroDocumento:this.dniinput,\n          codigo:     this.paquete.oaci_sede_origen + \"-\" +\n                      year.toString()+month.toString()+day.toString()+\"-\"+\n                      hour.toString()+\":\"+min.toString()+\"-\"+\n                      this.oaci_sede_destino\n        }\n        var paqueteTabla = {\n          descripcion:this.paquete.descripcion,\n          categoria:this.categoria.descripcion          \n        }\n        this.table1.data.push(paqueteTabla);\n        this.paquete.push(paquete);\n        //console.log(this.paquete);\n        //console.log(this.categoria);\n      },\n      obtenerCategoria(categoria){\n          this.categoria = categoria;\n          //console.log(categoria);\n      },\n      obtenerCiudad(sede){\n        let vue = this;\n          vue.ciudad = sede.pais.ciudad;\n          vue.paquete.oaci_sede_origen = vue.data_usuario.sedeOrigen;\n          vue.paquete.oaci_sede_destino = sede.codigoOaci;\n          //console.log(this.ciudad);\n      },\n      isEmailValid: function() {\n          return (this.email == \" \")? \"\" : (this.reg.test(this.email)) ? 'has-success' : 'has-error';\n      },\n      isPackageEmpty: function() {\n          return (this.table1.data.length == 0) ? this.notifyVue('top', 'center',4,NotificationTemplatePaqueteError) : 'has-error';\n      },\n      notifyVue(verticalAlign, horizontalAlign,color,componente) {\n        //const color = 4;\n        //console.log(color);\n        this.$notify({\n          component: componente,\n          icon: \"tim-icons icon-bell-55\",\n          horizontalAlign: horizontalAlign,\n          verticalAlign: verticalAlign,\n          type: this.type[color],\n          timeout: 0\n        });\n      },\n      enviarPaquete(){\n        let vue = this;\n\n        if(this.table1.data.length == 0 || this.email==null || this.dniinput==null || this.cliente.nombreRazonSocial==null ){\n          this.notifyVue('top', 'center',4,NotificationTemplatePaqueteError);\n        }else{\n            axios.post(vue.$store.state.appUri+'/paquetes/insertarLista', vue.paquete)\n            .then(response => {})\n            .catch(e => {\n              vue.errors.push(e)\n            });\n            vue.paquete = [];\n            vue.table1.data = [];\n            this.notifyVue('top', 'center',2,NotificationTemplatePaqueteSuccess)\n        }\n      },\n      regresarAlListar(){\n        this.$router.push('listadoPaquetes');\n      }\n    },\n    props: {\n\n    }\n  }\n</script>\n<style>\n</style>\n"]}]}