{"remainingRequest":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\src\\pages\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\src\\pages\\Login.vue","mtime":1596683947000},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713478866974},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\babel-loader\\lib\\index.js","mtime":1713478866263},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713478866974},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\vue-loader\\lib\\index.js","mtime":1713478868660}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { CardIndex, Button, FormGroupInput, ModalIndex } from '@/components';\nimport MainFooter from '@/layout/MainFooter';\nimport { Popover, Tooltip, DatePicker } from 'element-ui';\nimport axios from 'axios';\n\nimport Authentication from '@/store/authentication.js';\n\n\nexport default {\n\n  name: 'login-page',\n  bodyClass: 'login-page',\n  components: {\n    Authentication,\n    CardIndex,\n    ModalIndex,\n    MainFooter,\n    [Button.name]: Button,\n    [FormGroupInput.name]: FormGroupInput,\n    [Popover.name]: Popover,\n    [Tooltip.name]: Tooltip,\n    [DatePicker.name]: DatePicker\n  },\n  data(){\n    return{\n      modals: {\n        classic: false,\n        mini: false\n      },\n      activado: false,\n      mensaje: '',\n      datos:{\n        username:\"\",\n        password:\"\"\n      },\n      userData:{\n          id: 0,\n          nombreRazonSocial:'',\n          correo:'',\n          direccion:'',\n          fechaNacimiento:'',\n          tipoDocumento:'',\n          telefono:'',\n          username:'',\n          idioma:'',\n          numeroDocumento:'',\n          tipoUsuario:'',\n          dniContacto: '',\n          nombreContacto: '',\n          representanteLegalDni: '',\n          representanteLegalNombre: '',\n          idSede: -1\n      }\n    }      \n  },\n  methods:{\n    iniciarSesion:function(){\n      \n      let vue = this;\n      axios.post(this.$store.state.appUri+'/sesion/login', vue.datos)\n      .then(function(response){\n\n          if(response.data.mensaje_respuesta == \"Usuario logueado\"){ // Back debe verificar codigo de respuesta si no existe - != 200\n            //console.log(response.data);\n            vue.userData.idSede = response.data.idSede;\n            vue.userData.id = response.data.usuario.id;\n            vue.userData.correo = response.data.usuario.correo;\n            vue.userData.username = response.data.usuario.username;\n            vue.userData.telefono = response.data.usuario.telefono;\n            vue.userData.direccion = response.data.usuario.direccion;\n            //console.log(response.data.usuario.fechaNacimiento.substring(0,4)+\"-\"+response.data.usuario.fechaNacimiento.substring(5,7)+\"-\"+response.data.usuario.fechaNacimiento.substring(8,10));\n            vue.userData.fechaNacimiento = response.data.usuario.fechaNacimiento.substring(0,4)+\n                                        \"-\"+response.data.usuario.fechaNacimiento.substring(5,7)+\n                                        \"-\"+response.data.usuario.fechaNacimiento.substring(8,10);\n            vue.userData.nombreRazonSocial = response.data.usuario.nombreRazonSocial;\n            vue.userData.tipoDocumento = response.data.usuario.tipoDocumento;\n            vue.userData.idioma = response.data.usuario.idioma;\n            vue.userData.numeroDocumento = response.data.usuario.numeroDocumento;\n            vue.userData.tipoUsuario = response.data.usuario.tipoUsuario;\n            vue.userData.dniContacto = response.data.usuario.dniContacto;\n            vue.userData.nombreContacto = response.data.usuario.nombreContacto;\n            vue.userData.representanteLegalDni = response.data.usuario.representanteLegalDni;\n            vue.userData.representanteLegalNombre = response.data.usuario.representanteLegalNombre;\n            Authentication.logout();\n            Authentication.login(vue.userData);\n            vue.$router.push('/profile');\n          }else{\n            //console.log(\"USUARIO NO ENCONTRADO\");\n            vue.mensaje = 'Usuario no encontrado. Verifique el nombre de usuario y contraseña.'\n            vue.activado = true;\n          }\n      })\n      .catch(function (error) {\n        vue.mensaje = 'Usuario no encontrado. Verifique el nombre de usuario y contraseña.'\n        vue.activado = true;\n        console.log(error);\n      });\n    }\n  },\n  mounted(){\n    let vue = this;\n    if(Authentication.isAuthenticated()){\n      vue.$router.push('/profile');\n    }\n  }\n};\n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"page-header clear-filter\" filter-color=\"purple\">\n    <div\n      class=\"page-header-image\"      \n    ></div>\n\n    \n    <div class=\"content\">\n      <div class=\"container\">\n        <div class=\"col-md-5 ml-auto mr-auto\">\n          <card type=\"login\" plain>\n\n            <!--div slot=\"header\" class=\"logo-container\">\n              <img v-lazy=\"'img/now-logo.png'\" alt=\"\" />\n            </div-->\n            <h1 class=\"text-white text-center\">Inicio de sesión</h1>\n            <fg-input\n              class=\"no-border input-lg\"\n              addon-left-icon=\"now-ui-icons users_circle-08\"\n              placeholder=\"Usuario\"\n              v-model=\"datos.username\">\n            </fg-input>\n\n            <fg-input\n              class=\"no-border input-lg\"\n              addon-left-icon=\"now-ui-icons text_caps-small\"\n              placeholder=\"Contraseña\"\n              type=\"password\"\n              v-model=\"datos.password\">\n            </fg-input>\n\n            <template slot=\"raw-content\">\n              <div id=\"modals\" class=\"card-footer text-center\">\n                <n-button                 \n                  class=\"btn btn-login-register btn-round btn-lg btn-block\"\n                  @click.native=\"[modals.classic = true, iniciarSesion()]\"\n                  >Iniciar sesión</n-button>\n              </div>\n\n              <modal-index v-if=\"activado\" :show.sync=\"modals.classic\" headerClasses=\"justify-content-center\">\n                <h5 slot=\"header\" class=\"title title-up\">Usuario no encontrado</h5>\n                <p> \n                  {{mensaje}}\n                </p>\n                <template slot=\"footer\">\n                  <n-button type=\"danger\" @click.native=\"[modals.classic = false, activado = false]\">\n                    Cerrar\n                  </n-button>\n                </template>\n              </modal-index>\n\n              <div class=\"pull-left\">\n                <h6>\n                  <a\n                    style=\"color:White;\"\n                    href = \"#/signup\"\n                    class=\"link footer-link\">\n                    Crear cuenta\n                  </a>\n                </h6>\n              </div>\n              <div class=\"pull-right\">\n                <h6>\n                  <a\n                    class=\"nav-item link footer-link\">\n                    ¿Olvidaste la contraseña?\n                  </a>\n                </h6>\n              </div>\n\n              <!--div class=\"card-footer text-center\" style=\"margin-top: 30px !important\">\n                <div class=\"g-signin2\" data-onsuccess=\"onSignIn\"></div>\n              </div-->\n\n            </template>\n          </card>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</template>\n<script>\nimport { CardIndex, Button, FormGroupInput, ModalIndex } from '@/components';\nimport MainFooter from '@/layout/MainFooter';\nimport { Popover, Tooltip, DatePicker } from 'element-ui';\nimport axios from 'axios';\n\nimport Authentication from '@/store/authentication.js';\n\n\nexport default {\n\n  name: 'login-page',\n  bodyClass: 'login-page',\n  components: {\n    Authentication,\n    CardIndex,\n    ModalIndex,\n    MainFooter,\n    [Button.name]: Button,\n    [FormGroupInput.name]: FormGroupInput,\n    [Popover.name]: Popover,\n    [Tooltip.name]: Tooltip,\n    [DatePicker.name]: DatePicker\n  },\n  data(){\n    return{\n      modals: {\n        classic: false,\n        mini: false\n      },\n      activado: false,\n      mensaje: '',\n      datos:{\n        username:\"\",\n        password:\"\"\n      },\n      userData:{\n          id: 0,\n          nombreRazonSocial:'',\n          correo:'',\n          direccion:'',\n          fechaNacimiento:'',\n          tipoDocumento:'',\n          telefono:'',\n          username:'',\n          idioma:'',\n          numeroDocumento:'',\n          tipoUsuario:'',\n          dniContacto: '',\n          nombreContacto: '',\n          representanteLegalDni: '',\n          representanteLegalNombre: '',\n          idSede: -1\n      }\n    }      \n  },\n  methods:{\n    iniciarSesion:function(){\n      \n      let vue = this;\n      axios.post(this.$store.state.appUri+'/sesion/login', vue.datos)\n      .then(function(response){\n\n          if(response.data.mensaje_respuesta == \"Usuario logueado\"){ // Back debe verificar codigo de respuesta si no existe - != 200\n            //console.log(response.data);\n            vue.userData.idSede = response.data.idSede;\n            vue.userData.id = response.data.usuario.id;\n            vue.userData.correo = response.data.usuario.correo;\n            vue.userData.username = response.data.usuario.username;\n            vue.userData.telefono = response.data.usuario.telefono;\n            vue.userData.direccion = response.data.usuario.direccion;\n            //console.log(response.data.usuario.fechaNacimiento.substring(0,4)+\"-\"+response.data.usuario.fechaNacimiento.substring(5,7)+\"-\"+response.data.usuario.fechaNacimiento.substring(8,10));\n            vue.userData.fechaNacimiento = response.data.usuario.fechaNacimiento.substring(0,4)+\n                                        \"-\"+response.data.usuario.fechaNacimiento.substring(5,7)+\n                                        \"-\"+response.data.usuario.fechaNacimiento.substring(8,10);\n            vue.userData.nombreRazonSocial = response.data.usuario.nombreRazonSocial;\n            vue.userData.tipoDocumento = response.data.usuario.tipoDocumento;\n            vue.userData.idioma = response.data.usuario.idioma;\n            vue.userData.numeroDocumento = response.data.usuario.numeroDocumento;\n            vue.userData.tipoUsuario = response.data.usuario.tipoUsuario;\n            vue.userData.dniContacto = response.data.usuario.dniContacto;\n            vue.userData.nombreContacto = response.data.usuario.nombreContacto;\n            vue.userData.representanteLegalDni = response.data.usuario.representanteLegalDni;\n            vue.userData.representanteLegalNombre = response.data.usuario.representanteLegalNombre;\n            Authentication.logout();\n            Authentication.login(vue.userData);\n            vue.$router.push('/profile');\n          }else{\n            //console.log(\"USUARIO NO ENCONTRADO\");\n            vue.mensaje = 'Usuario no encontrado. Verifique el nombre de usuario y contraseña.'\n            vue.activado = true;\n          }\n      })\n      .catch(function (error) {\n        vue.mensaje = 'Usuario no encontrado. Verifique el nombre de usuario y contraseña.'\n        vue.activado = true;\n        console.log(error);\n      });\n    }\n  },\n  mounted(){\n    let vue = this;\n    if(Authentication.isAuthenticated()){\n      vue.$router.push('/profile');\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n  @import \"@/assets/scss/now-ui-kit.scss\";\n/*\nh1, .h1 {\n    font-size: 3.5em;\n    line-height: 1.15;\n    margin-bottom: 15px * 2;    \n}\n*/\n</style>\n"]}]}