{"remainingRequest":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\src\\pages\\Operario\\listadoPaquetes.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\src\\pages\\Operario\\listadoPaquetes.vue","mtime":1596683947000},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713478866974},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\babel-loader\\lib\\index.js","mtime":1713478866263},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713478866974},{"path":"C:\\Users\\PC\\Desktop\\Otros\\DP1\\Front\\dp1_front-Redex\\Redex\\node_modules\\vue-loader\\lib\\index.js","mtime":1713478868660}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {BaseTable,LoaderSpinner, NoDataFound} from \"@/components\";\nimport RegisterPackage from \"@/pages/Operario\"\nimport axios from 'axios';\nimport Authentication from '@/store/authentication.js';\n\nimport NotificationTemplateUpdatePackageSuccess from '../Notifications/NotificationTemplateUpdatePackageSuccess';\nimport NotificationTemplateUpdatePackageError from '../Notifications/NotificationTemplateUpdatePackageError';\n\nconst tableColumns = [\"Codigo tracking\",\"Nombre Cliente\", \"Sede Destino\",\"Categoria\",\"Fecha Registro\"];\n//const tableColumns = [\"Codigo tracking\", \"Nombre\", \"Fecha Registro\", \"Estado\"];\nexport default {\n  components: {\n    BaseTable,\n    LoaderSpinner,\n    NoDataFound,\n    RegisterPackage\n  },\n  data() {\n    return {\n      operarioTable: {\n        title: \"Admin Table\",\n        columns: [...tableColumns],\n        paquetes:[],\n        //actions: \"Acciones\"\n        estados:[]\n      },        \n      title: \"\",\n      searchWord: \"\",\n      isLoading: true,\n      showMessage: true,\n      listaBoolean: {detalle:false,eliminar:false,modificar:false},\n      idSede: \"\",\n      tableData:[], \n      actualizados:[],\n      errors:[],\n      paquetes:[],\n      type: [\"\", \"info\", \"success\", \"warning\", \"danger\"],\n      notifications: {\n        topCenter: false\n      }\n    };\n  },\n  mounted(){\n    let vue = this;\n    var idUsuario = Authentication.getProfile().id;\n    //vue.tableData = vue.adminTable.paquetes;\n    axios.get(this.$store.state.appUri+'/usuarios/obtenerDatosSede/'+idUsuario)\n    .then(function(response){\n      // console.log(response.data.sede.id);\n      vue.idSede = response.data.sede.id;\n      // console.log(vue.idSede);\n      //vue.idSede = 1;\n      axios.get(vue.$store.state.appUri+'/sedes/listarPaquetesEnAlmacen2/'+vue.idSede)//colocar el idSede del Operario\n      .then(function(response){\n      // console.log(response.data);\n      if(response.data.length != 0){\n          response.data.forEach(element => {\n          vue.operarioTable.paquetes.push({\n          \"codigo tracking\": element.codigoTracking,\n          \"nombre cliente\": element.cliente.nombreRazonSocial,\n          \"sede destino\": element.nombreSede.replace('_',' '),\n          \"fecha registro\": element.fecha_registro.substring(0,4)+\"/\"+element.fecha_registro.substring(5,7)+\"/\"+element.fecha_registro.substring(8,10),\n          \"categoria\": element.categoria.descripcion,\n          \"idPaquete\": element.id,\n          \"estado\": element.estado.replace('_',' ')\n          //\"destino\": element.activo ? \"Activo\": \"Inactivo\"\n        })\n        vue.paquetes.push({\n          \"id\": element.id,\n          \"oaci_sede_destino\": element.oaci_sede_destino,\n          \"id_categoria\": element.categoria.id,\n          \"descripcion\": element.descripcion,\n          \"fecha registro\": element.fecha_registro,\n          \"estado\": element.estado\n        })        \n        });\n        vue.showMessage = false;\n      }\n      vue.isLoading = false;\n      // console.log(vue.operarioTable.paquetes);\n      })\n\n    })\n    \n\n  },\n  methods:{\n    notifyVue(verticalAlign, horizontalAlign,color,componente) {\n      //const color = 4;\n      //console.log(color);\n      this.$notify({\n        component: componente,\n        icon: \"tim-icons icon-bell-55\",\n        horizontalAlign: horizontalAlign,\n        verticalAlign: verticalAlign,\n        type: this.type[color],\n        timeout: 0\n      });\n    },\n    filterTable:function(searchWord){\n      let vue = this;\n      tableData = vue.tableData.filter(\n        function(row){\n          return (JSON.stringify(row)).includes(searchWord);\n        }\n      )\n      vue.adminTable.data = tableData;\n    },\n    actualizarPaquete:function(item, state){\n      let vue = this;\n      // console.log(state+item.idPaquete);\n      vue.paquetes.forEach(element => {\n        // console.log(element.estado);\n        // console.log(element.id);\n        if(element.id == item.idPaquete){\n          element.estado= state;\n        // console.log(element.estado);\n        }\n      })\n    },\n    enviarPaquetes(){\n      let vue = this;\n      // console.log(vue.paquetes);\n      axios.post(vue.$store.state.appUri+'/paquetes/actualizarLista', vue.paquetes)\n      .then(response => {\n        vue.notifyVue('top', 'center',2, NotificationTemplateUpdatePackageSuccess);\n        vue.$forceUpdate();\n      })\n      .catch(e => {\n        vue.errors.push(e)\n        vue.notifyVue('top', 'center',4, NotificationTemplateUpdatePackageError); \n      });\n      vue.paquetes = [];\n    },\n    anadirPaquete(){\n      this.$router.push('RegisterPackage');\n    }\n  },\n  props: {\n    id: {\n      type: String,\n      default: () => {\n        return \"\";\n      }\n    }\n\n  }\n}\n",{"version":3,"sources":["listadoPaquetes.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"listadoPaquetes.vue","sourceRoot":"src/pages/Operario","sourcesContent":["<template>\n  <card>\n    <h5 slot=\"header\" class=\"title\">{{title}}</h5>\n\n\n    <div class=\"row\">\n        <div class=\"col-md-12 m-l-10 p-t-5\">\n            <base-input placeholder=\"Buscar\" v-model=\"searchWord\">\n            </base-input>\n        </div>\n        <!-- <div class=\"col-md-2\">    \n            <base-button :icon=\"true\" type=\"primary\" fill><i class=\"tim-icons icon-upload\"></i></base-button>\n            <base-button :icon=\"true\" fill><i class=\"tim-icons icon-trash-simple\"></i></base-button>\n        </div> -->\n        <div class=\"col-md-12 text-right mb-3\">\n            <base-button type=\"primary\" style=\"margin-right:10px\" fill @click=\"anadirPaquete()\" >AÃ±adir Nuevo Paquete</base-button>\n            <base-button type=\"primary\" fill @click=\"enviarPaquetes()\">Actualizar Estados</base-button>\n        </div>\n        \n    </div>\n    <div v-if=\"isLoading\"><loader-spinner></loader-spinner></div>\n    <div class=\"row\" v-else>\n        <div class=\"col-md-12\"  v-if=\"!showMessage\">\n            <base-table :data=\"operarioTable.paquetes\"\n                :columns=\"operarioTable.columns\"\n                thead-classes=\"text-primary\"\n                :searchWord=\"searchWord\"\n                :setAcciones=\"listaBoolean\"\n                :combo=\"true\"\n                :actions=\"false\"\n                :select=\"false\"\n                @signalState=\"actualizarPaquete\"\n                >\n            </base-table>\n        </div>\n        <div v-else class=\"col-md-12\"><no-data-found></no-data-found></div>\n\n    </div >\n\n  </card>\n</template>\n\n\n<script>\n  import {BaseTable,LoaderSpinner, NoDataFound} from \"@/components\";\n  import RegisterPackage from \"@/pages/Operario\"\n  import axios from 'axios';\n  import Authentication from '@/store/authentication.js';\n  \n  import NotificationTemplateUpdatePackageSuccess from '../Notifications/NotificationTemplateUpdatePackageSuccess';\n  import NotificationTemplateUpdatePackageError from '../Notifications/NotificationTemplateUpdatePackageError';\n  \n  const tableColumns = [\"Codigo tracking\",\"Nombre Cliente\", \"Sede Destino\",\"Categoria\",\"Fecha Registro\"];\n  //const tableColumns = [\"Codigo tracking\", \"Nombre\", \"Fecha Registro\", \"Estado\"];\n  export default {\n    components: {\n      BaseTable,\n      LoaderSpinner,\n      NoDataFound,\n      RegisterPackage\n    },\n    data() {\n      return {\n        operarioTable: {\n          title: \"Admin Table\",\n          columns: [...tableColumns],\n          paquetes:[],\n          //actions: \"Acciones\"\n          estados:[]\n        },        \n        title: \"\",\n        searchWord: \"\",\n        isLoading: true,\n        showMessage: true,\n        listaBoolean: {detalle:false,eliminar:false,modificar:false},\n        idSede: \"\",\n        tableData:[], \n        actualizados:[],\n        errors:[],\n        paquetes:[],\n        type: [\"\", \"info\", \"success\", \"warning\", \"danger\"],\n        notifications: {\n          topCenter: false\n        }\n      };\n    },\n    mounted(){\n      let vue = this;\n      var idUsuario = Authentication.getProfile().id;\n      //vue.tableData = vue.adminTable.paquetes;\n      axios.get(this.$store.state.appUri+'/usuarios/obtenerDatosSede/'+idUsuario)\n      .then(function(response){\n        // console.log(response.data.sede.id);\n        vue.idSede = response.data.sede.id;\n        // console.log(vue.idSede);\n        //vue.idSede = 1;\n        axios.get(vue.$store.state.appUri+'/sedes/listarPaquetesEnAlmacen2/'+vue.idSede)//colocar el idSede del Operario\n        .then(function(response){\n        // console.log(response.data);\n        if(response.data.length != 0){\n            response.data.forEach(element => {\n            vue.operarioTable.paquetes.push({\n            \"codigo tracking\": element.codigoTracking,\n            \"nombre cliente\": element.cliente.nombreRazonSocial,\n            \"sede destino\": element.nombreSede.replace('_',' '),\n            \"fecha registro\": element.fecha_registro.substring(0,4)+\"/\"+element.fecha_registro.substring(5,7)+\"/\"+element.fecha_registro.substring(8,10),\n            \"categoria\": element.categoria.descripcion,\n            \"idPaquete\": element.id,\n            \"estado\": element.estado.replace('_',' ')\n            //\"destino\": element.activo ? \"Activo\": \"Inactivo\"\n          })\n          vue.paquetes.push({\n            \"id\": element.id,\n            \"oaci_sede_destino\": element.oaci_sede_destino,\n            \"id_categoria\": element.categoria.id,\n            \"descripcion\": element.descripcion,\n            \"fecha registro\": element.fecha_registro,\n            \"estado\": element.estado\n          })        \n          });\n          vue.showMessage = false;\n        }\n        vue.isLoading = false;\n        // console.log(vue.operarioTable.paquetes);\n        })\n\n      })\n      \n\n    },\n    methods:{\n      notifyVue(verticalAlign, horizontalAlign,color,componente) {\n        //const color = 4;\n        //console.log(color);\n        this.$notify({\n          component: componente,\n          icon: \"tim-icons icon-bell-55\",\n          horizontalAlign: horizontalAlign,\n          verticalAlign: verticalAlign,\n          type: this.type[color],\n          timeout: 0\n        });\n      },\n      filterTable:function(searchWord){\n        let vue = this;\n        tableData = vue.tableData.filter(\n          function(row){\n            return (JSON.stringify(row)).includes(searchWord);\n          }\n        )\n        vue.adminTable.data = tableData;\n      },\n      actualizarPaquete:function(item, state){\n        let vue = this;\n        // console.log(state+item.idPaquete);\n        vue.paquetes.forEach(element => {\n          // console.log(element.estado);\n          // console.log(element.id);\n          if(element.id == item.idPaquete){\n            element.estado= state;\n          // console.log(element.estado);\n          }\n        })\n      },\n      enviarPaquetes(){\n        let vue = this;\n        // console.log(vue.paquetes);\n        axios.post(vue.$store.state.appUri+'/paquetes/actualizarLista', vue.paquetes)\n        .then(response => {\n          vue.notifyVue('top', 'center',2, NotificationTemplateUpdatePackageSuccess);\n          vue.$forceUpdate();\n        })\n        .catch(e => {\n          vue.errors.push(e)\n          vue.notifyVue('top', 'center',4, NotificationTemplateUpdatePackageError); \n        });\n        vue.paquetes = [];\n      },\n      anadirPaquete(){\n        this.$router.push('RegisterPackage');\n      }\n    },\n    props: {\n      id: {\n        type: String,\n        default: () => {\n          return \"\";\n        }\n      }\n\n    }\n  }\n</script>\n<style>\n</style>\n"]}]}